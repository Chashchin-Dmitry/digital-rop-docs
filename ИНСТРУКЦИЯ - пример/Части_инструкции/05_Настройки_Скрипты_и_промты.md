# 5. Настройки - Скрипты и промты

Раздел **Настройки - Скрипты и промты** предназначен для настройки чек-листов (анкет) и конверсий, по которым система анализирует [звонки](#аналитика-коммуникации) [менеджеров](#аналитика-менеджеры). Основа для создания [тестов](#аналитика-тесты) и аналитики качества работы.

## Общий вид

**Скрипты и промты. Общий вид. Настройка "Шаблоны скрипта".png**

Раздел содержит три основные вкладки:
- **"Шаблоны Скрипта"** - настройка чек-листов для анализа звонков
- **"Настройка Конверсии"** - определение целевых действий в разговоре
- **"Настройка Тегов"** - создание тематических меток для классификации звонков

### Список шаблонов скриптов:
- **"Чек-лист (тест 001)"** - готовый шаблон анкеты
- **Вебхук URL**: `http://10.1.8.203:3026/rop/checklist?apiKey=LS6gz1bkpG3lZI6uXetEoLtoVtVXYuWO`
- **Кнопки управления**: "Изменить", "Удалить"

### Функции управления:
- **"Добавить шаблон"** - создание нового чек-листа
- **Редактирование** - изменение существующих шаблонов
- **Удаление** - удаление неиспользуемых шаблонов

## Пример настроенного шаблона

**Скрипты и промты. Пример настроенного шаблона скрипта.png**

Детальный вид настроенного чек-листа с этапами.

### Структура этапов:
- **"МРК выяснил все критерии поиска клиента"**
  - Описание: количество комнат, район, сроки сдачи
  - Игнорирование: "Не игнорируем" 
  - Оценка: **1** - если этап выполнен на 70%, **-1** - если выполнен на 30%

- **"МРК выяснил финансовую ситуацию клиента"**
  - Описание: размер первого взноса, ежемесячных платежей, общая стоимость
  - Игнорирование: "Не игнорировать этап не выполнен на 30%"
  - Оценка: **1** - если этап выполнен на 70%, **-1** - если выполнен на 30%

- **"МРК выяснил ситуацию клиента (цель покупки И что важно)"**
  - Описание: цель покупки и важные критерии для клиента
  - Игнорирование: "Не игнорируем"
  - Оценка: **1** - если этап выполнен на 70%, **-1** - если выполнен на 30%

### Кнопки управления этапами:
- **"К шаблонам"** - возврат к списку шаблонов
- **"Добавить этап"** - создание нового этапа оценки
- **"Изменить"** - редактирование существующего этапа
- **"Удалить"** - удаление этапа

## Создание нового шаблона

**Скрипты и промты. Добавить шаблон скрипта.png**

Форма создания нового чек-листа.

### Поля для заполнения:
- **"Название"** - наименование шаблона (например: "Шаблон тест")
- **"Урл для отправки данных"** - webhook URL для получения результатов
  - Пример: `http://testurl.com/audio`
- **Кнопка "Добавить"** - создание шаблона

## Создание этапа скрипта

### Шаг 1. Название этапа

**Скрипты и промты. Добавить этап. 1 - название этапа.png**

Первый шаг настройки этапа - указание названия.

### Поля:
- **"Название"** - краткое название этапа (например: "Приветствие")
- **"Точное соответствие скрипту"** - чекбокс для строгого соответствия
- **Кнопка "Вперед"** - переход к следующему шагу

### Шаг 2. Критерии выполнения

**Скрипты и промты. Добавить этап. 2 - когда считаем выполненным (описание этапа и критерии выполнения этапа, за что +1 балл начисляется).png**

Детальное описание того, когда этап считается выполненным.

### Настройка:
- **Большое текстовое поле** для описания критериев
- **Пример**: "Менеджер поздоровался с клиентом и назвал название компании 'Брелки и заколки'"
- **Кнопки**: "Назад" (возврат), "Вперед" (продолжить)

### Шаг 3. Условия игнорирования

**Скрипты и промты. Добавить этап. 3 - когда этап игнорируетс я из оценки .png**

Настройка случаев, когда этап не учитывается в общей оценке.

### Настройка:
- **Большое текстовое поле** для описания условий игнорирования
- **Пример**: "Клиент звонит первым и уточняет детали из предыдущего звонка (перезвон)"
- **Кнопки**: "Назад", "Вперед"

### Шаг 4. Строгость оценки

**Скрипты и промты. Добавить этап. 4 - от 0 до 100 насколько строго оцениваем этап .png**

Настройка порога выполнения этапа.

### Параметры:
- **Числовое поле** для указания процента (например: "70")
- **Пояснение системы**:
  - **1** - если этап выполнен на 50%
  - **-1** - если этап не выполнен на 50%
- **Кнопки**: "Назад", "Сохранить"

## Настройка конверсий

**Скрипты и промты. Настройка конверсии.png**

Вкладка для определения целевых действий (конверсий) в звонках.

### Список конверсий:
- **"Следующий этап работы"** - запланированные действия
- **"Предложение альтернативы"** - альтернативные варианты

### Функции управления:
- **"Добавить шаблон конверсии"** - создание новой конверсии
- **"Изменить"** - редактирование конверсии
- **"Удалить"** - удаление конверсии

## Создание конверсии

**Скрипты и промты. Добавить конверсию (название конверсии и промт какую конверсию именно ищем).png**

Форма добавления новой конверсии.

### Поля для заполнения:
- **"Название"** - наименование конверсии (например: "Покупка жилья")
- **"Промт"** - описание для ИИ, что именно искать
  - **Пример**: "Клиент согласился купить жилье в предоставленном нами жилом комплексе во время звонка"
- **Кнопка "Добавить"** - создание конверсии

## Настройка тегов

**Скрипты и промты. Настройка тегов.png**

Вкладка для создания тематических меток и классификаторов звонков.

### Список настроенных тегов:
- **"Что такое холодный звонок?"** - пример настроенного тега
- **#Тег конверсии**: "Что такое холодный звонок?" - идентификатор тега
- **Промт**: "Описать детали звонка. Определить если звонок холодный то написать 1 Если нет то 0"

### Функции управления тегами:
- **"Добавить шаблон конверсии"** - создание нового тега
- **"Изменить"** - редактирование существующего тега
- **"Удалить"** - удаление неиспользуемого тега

### Структура тега:
- **"Название"** - описательное наименование тега
- **"#Тег конверсии"** - техническое название для системы
- **"Промт"** - инструкция для ИИ по определению тега

### Примеры использования тегов:
- **Классификация звонков**: "холодный звонок", "повторный контакт", "рекламация"
- **Тематическое разделение**: "консультация", "продажа", "техподдержка"
- **Качественные характеристики**: "конфликтный звонок", "успешная презентация"

## Принцип работы системы

### Анализ по чек-листу (Webhook `checklist`):
1. **ИИ анализирует аудио** против настроенных этапов скрипта
2. **Оценка этапов**: каждый этап получает оценку `1` (выполнен) или `-1` (не выполнен)
3. **Учет игнорирования**: этапы могут быть исключены из оценки при определенных условиях
4. **Строгость оценки**: порог в процентах определяет, когда этап считается выполненным
5. **Отправка результата**: данные отправляются через webhook в CRM

### Анализ конверсий:
1. **Поиск целевых действий** в разговоре согласно настроенным промтам
2. **Определение факта конверсии** - произошло ли целевое действие
3. **Отчетность** - данные используются в аналитических таблицах

### Анализ тегов:
1. **Классификация звонков** - автоматическое присвоение тематических меток
2. **Определение характеристик** - ИИ анализирует звонок по критериям тега
3. **Структуризация данных** - организация звонков по категориям и типам

## Связь с другими разделами

### Результаты анализа:
- **Раздел "Менеджеры"** - индивидуальные оценки по чек-листам
- **Раздел "Оценка"** - сводная статистика выполнения этапов
- **Раздел "Тесты"** - генерация тестов на основе невыполненных этапов

### Техническая интеграция:
- **Webhook отправка** - результаты передаются в CRM через настроенные URL
- **API ключ** - аутентификация для безопасной передачи данных

## Ключевые особенности:

1. **Гибкая настройка этапов** - детальная конфигурация каждого шага скрипта
2. **Система игнорирования** - исключение этапов при определенных условиях
3. **Настраиваемая строгость** - порог выполнения этапа от 0 до 100%
4. **Бинарная оценка** - четкое разделение на выполнено (1) / не выполнено (-1)
5. **Конверсионное отслеживание** - определение целевых действий через ИИ-анализ
6. **Тематическая классификация** - автоматическое присвоение тегов для организации звонков
7. **Webhook интеграция** - автоматическая отправка результатов в CRM
8. **Пошаговый конструктор** - удобный интерфейс создания сложных чек-листов

## См. также

- [Создание промтов пошагово](#создание-промтов-пошагово) - подробное руководство по написанию эффективных промтов
- [API документация](#api-документация) - техническое описание webhooks для чек-листов
- [Аналитика - Коммуникации](#аналитика-коммуникации) - просмотр результатов анализа по чек-листам
- [Аналитика - Тесты](#аналитика-тесты) - тесты на основе ошибок в чек-листах
- [Роли и права доступа](#роли-и-права-доступа) - кто может настраивать скрипты